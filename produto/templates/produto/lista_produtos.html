{% extends 'base.html' %}
{% load static %}
{% load filters %}

{% block titulo %}Lista de Produtos{% endblock %}

{% block conteudo %}
    <div class="row">
        {% for produto in produtos %}
            <div class="col-lg-4 col-md-6 mb-4">  <div class="card h-100">
                    {% if produto.imagem %}
                        <a href="{% url 'produto:detalhe' produto.slug %}">
                            <img class="card-img-top" src="{{ produto.imagem.url }}" alt="{{ produto.nome }}">
                        </a>
                    {% endif %}

                    <div class="card-body d-flex flex-column">
                        <h5 class="card-title">
                            <a href="{% url 'produto:detalhe' produto.slug %}">{{ produto.nome }}</a>
                        </h5>
                        <p class="card-text flex-grow-1">{{ produto.descricao_curta }}</p>

                        <div class="mt-auto">
                            {% if produto.preco_marketing_promocional > 0 %}
                                <strong class="h5 text-danger">
                                    {{ produto.get_preco_promocional_formatado }}
                                </strong>
                                <span class="text-muted ml-2">
                                    <del>{{ produto.get_preco_formatado }}</del>
                                </span>
                            {% else %}
                                <strong class="h5">
                                    {{ produto.get_preco_formatado }}
                                </strong>
                            {% endif %}
                            <a href="{% url 'produto:detalhe' produto.slug %}" class="btn btn-primary btn-block mt-2">Comprar</a>
                        </div>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>

    <div class="row mt-3">
        <div class="col">
            {% include 'Parciais/_pagination.html'%}
        </div>
    </div>  
{% endblock %}